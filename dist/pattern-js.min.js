!function(){var i={},n=function(t){return this.as=function(n){i[t]=n},this},o=function(n){return"function"==typeof n},e=function(n){return"object"==typeof n},t=function(n){return Array.isArray(n)},u=function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i])},f=function(n,t){if(e(n))for(var i in n)n.hasOwnProperty(i)&&t(i)},s=function(n,t,i){!function(){n.apply(t,arguments)}(i)},c=function(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t){n.splice(i,1),o(t.onRemove)&&t.onRemove();break}return n};n("Notifier").as(function(){var r=[];return{addReceiver:function(n){o(n.notify)&&r.push(n)},add:function(n){return t(n)?u(n,this.addReceiver.bind(this)):this.addReceiver(n),this},remove:function(n){return r=c(r,n),this},notifyWith:function(t){return f(t,function(n){this[n]=t[n]}.bind(this)),this},notify:function(t,i){u(r,function(n){n.notify(t,i)}.bind(this))}}}),n("Observable").as(function(){var r=[];return{addObserver:function(n){return e(n)&&o(n.onUpdate)?(n._observable=this,r.push(n),o(n.onRegister)&&n.onRegister(),this):n},addObservers:function(n){return u(n,this.addObserver.bind(this)),this},remove:function(n){return r=c(r,n),this},notifyWith:function(t){return f(t,function(n){this[n]=t[n]}.bind(this)),this},notify:function(t,i){u(r,function(n){n.onUpdate(t,i)}.bind(this))}}}),n("Observer").as(function(n){var t,i,r=e(t=n)?t:{};return r.onUpdate=function(n,t){return o(r[n])&&s(r[n],r,t),n},o((i=r).init)&&i.init(),r}),n("Publisher").as(function(){var r=[];return{register:function(n){return u(n,function(n){e(n)&&r.push(n)}),this},notifyWith:function(t){return f(t,function(n){this[n]=t[n]}.bind(this)),this},remove:function(n){return r=c(r,n),this},notify:function(t,i){u(r,function(n){o(n[t])&&s(n[t],n,i)})},getSubscribers:function(){return r}}}),n("Receiver").as(function(){var i={},r={},e=function(n,t,i){return!n[t]&&o(i)&&(n[t]=i),n};return{on:function(n,t){return i=e(i,n,t),this},once:function(n,t){return r=e(r,n,t),this},notify:function(n,t){return o(r[n])&&(s(r[n],this,t),delete r[n]),o(i[n])&&s(i[n],this,t),n}}}),n("Signal").as(function(){var i=[];return{addSlot:function(n){o(n)&&i.push(n)},add:function(n){return t(n)?u(n,this.addSlot.bind(this)):this.addSlot(n),this},remove:function(n){return i=c(i,n),this},dispatch:function(){var t=arguments;u(i,function(n){n.apply(this,t)}.bind(this))}}}),"object"==typeof window&&(window.Pattern=i)}();