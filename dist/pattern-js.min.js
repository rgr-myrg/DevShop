!function(){var t={},n=function(n){return this.name=n,this.class=function(n){t[this.name]=n},this},e=function(n){return"function"==typeof n},o=function(n){return"object"==typeof n},u=function(n){return Array.isArray(n)},c=function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i])},i=function(n,t){if(o(n))for(var i in n)n.hasOwnProperty(i)&&t(i)},s=function(n,t,i){!function(){n.apply(t,arguments)}(i)},f=function(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t){n.splice(i,1),e(t.onRemove)&&t.onRemove();break}return n};n("Notifier").class(function(){var r=[];return{addReceiver:function(n){e(n.notify)&&r.push(n)},add:function(n){return u(n)?c(n,this.addReceiver.bind(this)):this.addReceiver(n),this},remove:function(n){return r=f(r,n),this},notifyWith:function(t){return i(t,function(n){this[n]=t[n]}.bind(this)),this},notify:function(t,i){c(r,function(n){n.notify(t,i)}.bind(this))}}}),n("Observable").class(function(){var r=[];return{addObserver:function(n){return o(n)&&e(n.onUpdate)?(n._observable=this,r.push(n),e(n.onRegister)&&n.onRegister(),this):n},addObservers:function(n){return c(n,this.addObserver.bind(this)),this},removeObserver:function(n){return r=f(r,n),this},notifyWith:function(t){return i(t,function(n){this[n]=t[n]}.bind(this)),this},notifyObservers:function(t,i){c(r,function(n){n.onUpdate(t,i)}.bind(this))}}}),n("Observer").class(function(n){var t,i,r=o(t=n)?t:{};return r.onUpdate=function(n,t){return e(r[n])&&s(r[n],r,t),n},e((i=r).init)&&i.init(),r}),n("Publisher").class(function(){var r=[];return{registerSubscribers:function(n){return c(n,function(n){o(n)&&r.push(n)}),this},notifyWith:function(t){return i(t,function(n){this[n]=t[n]}.bind(this)),this},removeSubscriber:function(n){return r=f(r,n),this},notify:function(t,i){c(r,function(n){e(n[t])&&s(n[t],n,i)})},getSubscribers:function(){return r}}}),n("Receiver").class(function(){var i=callOnce={},r=function(n,t,i){return!n[t]&&e(i)&&(n[t]=i),n};return{on:function(n,t){return i=r(i,n,t),this},once:function(n,t){return callOnce=r(callOnce,n,t),this},notify:function(n,t){return e(callOnce[n])&&(s(callOnce[n],this,t),delete callOnce[n]),e(i[n])&&s(i[n],this,t),n}}}),n("Signal").class(function(){var i=[];return{addSlot:function(n){e(n)&&i.push(n)},add:function(n){return u(n)?c(n,this.addSlot.bind(this)):this.addSlot(n),this},remove:function(n){return i=f(i,n),this},dispatch:function(){var t=arguments;c(i,function(n){n.apply(this,t)}.bind(this))}}}),"object"==typeof window&&(window.Pattern=t)}();