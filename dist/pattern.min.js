/* pattern-js v1.1.0 Tue Dec 08 2015 00:54:49 GMT-0500 (EST) */!function(n){n.Pattern=n.Pattern||{}}(window),function(n){var e=!0,r=!1,t=null,u=function(){},o=function(n){return"function"==typeof n},i=function(n){return"object"==typeof n},f=function(n){return"number"==typeof n},c=function(n){o(n.init)&&n.init()},a=function(n){return i(n)?n:{}},s=function(n,e,r){!function(){n.apply(e,arguments)}(r)},v=function(n,e){for(var r=0,t=n.length;t>r;r++)if(n[r]===e){n.splice(r,1),o(e.onRemove)&&e.onRemove();break}return n};n.EventSignal=function(){var n=[];return{addListener:function(e){return o(e)&&n.push(e),n},removeListener:function(e){return n=v(n,e)},dispatch:function(){for(var e=[],r=n.length,t=0;r>t;t++){var u=n[t];o(u)?u.apply(this,arguments):e.push(t)}}}},n.Notifier=function(n){var e=[],r=a(n);return r.addReceiver=function(n){return o(n.notify)&&e.push(n),e},r.removeReceiver=function(n){return e=v(e,n)},r.notify=function(n,r){for(var t=0,u=e.length;u>t;t++)e[t].notify(n,r);return n},c(r),r},n.Receiver=function(n){var e={},r={},t=function(n,e,r){return!n[e]&&o(r)&&(n[e]=r),n},u=a(n);return u.on=function(n,r){return e=t(e,n,r)},u.once=function(n,e){return r=t(r,n,e)},u.notify=function(n,t){r[n]&&(s(r[n],u,t),delete r[n]),e[n]&&s(e[n],u,t)},c(u),u},n.Observable=function(n){var e=[],r=a(n);return r.addObserver=function(n){return i(n)&&o(n.onUpdate)?(n._observable=r,e.push(n),o(n.onRegister)&&n.onRegister(),e):n},r.removeObserver=function(n){return e=v(e,n)},r.notifyObservers=function(n,r){for(var t=0,u=e.length;u>t;t++)e[t].onUpdate(n,r)},c(r),r},n.Observer=function(n){var e=a(n);return e.onUpdate=function(n,r){return o(e[n])&&s(e[n],e,r),n},c(e),e},n.Publisher=function(n){var e=[],r=a(n);return r.registerSubscriber=function(n){return i(n)&&e.push(n),e},r.removeSubscriber=function(n){return e=v(e,n)},r.notify=function(n,r){for(var t=0,u=e.length;u>t;t++){var i=e[t];o(i[n])&&s(i[n],i,r)}return n},c(r),r},n.Queue=function(n){var c=r,a=t,s=u,v=-1,l=[];return n!==t&&i(n)&&i(n.delegate)&&o(n.delegate.onQueueItem)?(a=n.delegate,o(a.onQueueError)&&(s=a.onQueueError),f(a.maxCount)&&a.maxCount>0&&(v=a.maxCount),{add:function(){return v>0&&l.length>=v?(s(new Error("maxCount exceeded: "+l.length)),t):(l.push(arguments),l)},addPriority:function(){return v>0&&l.length>=v?(s(new Error("maxCount exceeded: "+l.length)),t):(l.unshift(arguments),l)},start:function(){return c||(c=e,this.run()),c},run:function(){for(;c;)l.length>0?a.onQueueItem.apply(a,l.shift()):this.stop();return l},stop:function(){return c=r},isRunning:function(){return c},count:function(){return l.length},clear:function(){return this.stop(),l=[]}}):t},n.version="1.1.0"}(Pattern);