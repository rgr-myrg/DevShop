/**
 * Copyright (c) 2011-2014 Activity, LLC.
 * Version: 1.0.1
 * Built: Thu Aug 14 2014 02:42:51 GMT-0400 (EDT)
 * Released under the MIT license:
 * https://github.com/rgr-myrg/pattern-js/raw/master/MIT-LICENSE
 */
(function(w){w.Pattern=$P=w.Pattern||{};})(window);(function(b){b.Queue=function(a){var e=null,f=null,d=!1,c=function(){},b=function(){},j=300,h=-1,g=[];if(typeof a!=="object"||!a.id)throw Error("Queue options Object is Null");e=a.id;if(!isNaN(a.timeToWait)&&a.timeToWait>0)j=a.timeToWait;if(!isNaN(a.maxCount)&&a.maxCount>0)h=a.maxCount;if(typeof a.callback==="function")c=a.callback;if(typeof a.onError==="function")b=a.onError;return{add:function(){if(h>0&&g.length>=h)return b(Error("Max count exceeded: "+g.length)),!1;g.push(arguments);return!0},
start:function(){if(!d)try{f=setInterval(e+".run()",j)}catch(c){b(c)}},run:function(){if(g.length>0){d=!0;try{c.apply(this,g.shift())}catch(e){this.stop(),b(e)}}else this.stop()},stop:function(){d=!1;clearInterval(f)},isRunning:function(){return d},count:function(){return g.length},clear:function(){this.stop();g=[]}}}})(Pattern);
(function(b){b.ObjectFactory=function(a){if(typeof a!=="object")throw"Object not provided";var e=function(d){if(typeof d==="function")try{return new d}catch(c){}else if(typeof d==="object")return d},f=e(a._implements_),d=e(a._extends_),a=e(a._constructor_),c;for(c in d)d.hasOwnProperty(c)&&!a[c]&&(a[c]=d[c]);for(c in f)if(f.hasOwnProperty(c)&&!a[c])throw object.instance+" must implement '"+c+"' "+typeof f[c];if(typeof a.init==="function")try{a.init()}catch(b){}return a}})(Pattern);
(function(b){b.Observable=function(a){return b.ObjectFactory({_extends_:function(){var e=[];return{addObserver:function(a){if((typeof a==="function"||typeof a==="object")&&typeof a.update==="function")if(a._observable_=this,e.push(a),typeof a.onRegister==="function")try{a.onRegister()}catch(d){}},notifyObservers:function(){for(var a=0,d=e.length;a<d;a++){var c=e[a];c.update.apply(c,arguments)}},removeObserver:function(a){for(var d=0,c=e.length;d<c;d++)if(e[d]===a){e.splice(d,1);break}}}},_constructor_:a})}})(Pattern);
(function(b){b.Observer=function(a){return b.ObjectFactory({_extends_:function(){return{update:function(a){if(typeof this[a.eventName]==="function")this[a.eventName](a.eventData)}}},_constructor_:a})}})(Pattern);
(function(b){b.EventSignal=function(){var a=[];return{addListener:function(e){typeof e==="function"&&a.push(e)},removeListener:function(e){for(var b=a.length,d=0;d<b;d++)a[d]===e&&(a[d]=null)},dispatch:function(){for(var e=[],b=a.length,d=0;d<b;d++){var c=a[d];typeof c==="function"?c.apply(this,arguments):e.push(d)}b=e.length;for(d=0;d<b;d++)a.splice(d,1)}}}})(Pattern);
(function(b){b.Publisher=function(){var a={};return{registerEvents:function(e){typeof e==="object"&&(a=e)},registerSubscriber:function(e){if(typeof e.onRegister==="function"){var b=e.onRegister(),d;for(d in b)b.hasOwnProperty(d)&&typeof b[d]==="function"&&typeof a[d]==="object"&&typeof a[d].addListener==="function"&&a[d].addListener(b[d]);e.onRegister=function(){}}},notify:function(a,b){typeof a.dispatch==="function"&&a.dispatch(b)}}}})(Pattern);
(function(b){b.MVCObservable=function(a){return b.ObjectFactory({_extends_:function(){return{observers:[],addObserver:function(a){if((typeof a==="function"||typeof a==="object")&&typeof a.notify==="function")if(this.observers.push(a),typeof a.onRegister==="function")a.onRegister()},notifyObservers:function(a){for(var b=this.observers.length,d=0;d<b;d++)this.observers[d].notify(a,this)}}},_constructor_:a})};b.MVCObserver=function(a){return b.ObjectFactory({_extends_:function(){return{onRegister:function(){},
notify:function(a,b){this.observable=b;if(typeof this[a]==="function")try{this[a]()}catch(d){}}}},_constructor_:a})};b.IProxy={NAME:""};b.IMediator={NAME:"",listNotificationInterests:function(){},handleNotification:function(){}};b.ICommand={execute:function(){}};b.Proxy=function(){var a={};return{facade:null,setData:function(b){a=b},getData:function(){return a},onRegister:function(){},onRemove:function(){}}};b.Mediator=b.MVCObserver(function(){return{facade:null,onRegister:function(){},onRemove:function(){}}});
b.Facade=function(){var a=function(){var a={};return{facade:{},registerProxy:function(c){c.facade=this.facade;a[c.NAME]||(a[c.NAME]=c);if(typeof c.onRegister==="function")c.onRegister()},retrieveProxy:function(c){return a[c]?a[c]:null},removeProxy:function(c){if(typeof a[c].onRemove==="function")a[c].onRemove();a[c]=null}}}(),e=b.MVCObservable(function(){var a={};return{facade:{},notification:{},registerMediator:function(c){c.facade=this.facade;a[c.NAME]||(a[c.NAME]=c,this.addObserver(c))},retrieveMediator:function(c){return a[c]?
a[c]:null},removeMediator:function(c){if(typeof a[c].onRemove==="function")a[c].onRemove();a[c]=null},notifyObservers:function(a){for(var d=this.observers.length,b=0;b<d;b++){for(var e=this.observers[b].listNotificationInterests(),f=!1,i=0,k=e.length;i<k;i++)if(e[i]==this.notification.name){f=!0;break}if(f)this.observers[b].notification=this.notification,this.observers[b].notify(a,this)}},sendNotification:function(a){this.notification=a;this.notifyObservers("handleNotification")}}}),f=new b.MVCObserver(function(){var a=
{},b=[];return{facade:{},NAME:"Controller",registerCommand:function(e,f){f.facade=this.facade;a[e]||(a[e]=f,b.push(e))},listNotificationInterests:function(){return b},handleNotification:function(){var b=this.notification;typeof a[b.name]==="object"&&typeof a[b.name].execute==="function"&&a[b.name].execute(b)}}});return{CMD_STARTUP:"CMD_STARTUP",registerProxy:function(b){a.registerProxy(b)},registerMediator:function(a){e.registerMediator(a)},registerCommand:function(a,b){f.registerCommand(a,b)},retrieveProxy:function(b){return a.retrieveProxy(b)},
retrieveMediator:function(a){return e.retrieveMediator(a)},removeProxy:function(b){a.removeProxy(b)},removeMediator:function(a){e.removeMediator(a)},sendNotification:function(a,b,f){e.sendNotification({name:a,body:b,type:f})},initializeFacade:function(){a.facade=this;e.facade=this;f.facade=this;this.registerMediator(f)}}}})(Pattern);
