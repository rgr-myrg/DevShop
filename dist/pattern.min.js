/* pattern-js v1.1.0 Mon Dec 07 2015 23:50:09 GMT-0500 (EST) */!function(n){n.Pattern=n.Pattern||{}}(window),function(n){var e=!0,t=!1,r=null,u=function(){},o=function(n){return"function"==typeof n},i=function(n){return"object"==typeof n},a=function(n){return"number"==typeof n},f=function(n){o(n.init)&&n.init()};n.EventSignal=function(){var n=[];return{addListener:function(e){return o(e)&&n.push(e),n},removeListener:function(e){for(var t=n.length,r=0;t>r;r++)n[r]===e&&(n[r]=null);return n},dispatch:function(){for(var e=[],t=n.length,r=0;t>r;r++){var u=n[r];o(u)?u.apply(this,arguments):e.push(r)}for(t=e.length,r=0;t>r;r++)n.splice(r,1)}}},n.Observable=function(n){var e=[],t=i(n)?n:{};return t.addObserver=function(n){return i(n)&&o(n.onUpdate)?(n._observable=t,e.push(n),o(n.onRegister)&&n.onRegister(),e):n},t.removeObserver=function(n){for(var t=0,r=e.length;r>t;t++)if(e[t]===n){e.splice(t,1),o(n.onRemove)&&n.onRemove();break}return e},t.notifyObservers=function(){for(var n=0,t=e.length;t>n;n++){var r=e[n];r.onUpdate.apply(r,arguments)}},f(t),t},n.Observer=function(n){return n=i(n)?n:{},n.onUpdate=function(){var e=arguments[0];return o(n[e.eventName])&&!function(){n[e.eventName].apply(this,arguments)}(e.eventData),e},f(n),n},n.Publisher=function(n){var e=[],t=i(n)?n:{};return t.registerSubscriber=function(n){return i(n)&&e.push(n),e},t.removeSubscriber=function(n){for(var t=0,r=e.length;r>t;t++)if(e[t]===n){e.splice(t,1);break}return e},t.notify=function(n,t){for(var r=0,u=e.length;u>r;r++){var i=e[r];o(i[n])&&!function(){i[n].apply(i,arguments)}(t)}return n},f(t),t},n.Queue=function(n){var f=t,c=r,s=u,l=-1,v=[];return n!==r&&i(n)&&i(n.delegate)&&o(n.delegate.onQueueItem)?(c=n.delegate,o(c.onQueueError)&&(s=c.onQueueError),a(c.maxCount)&&c.maxCount>0&&(l=c.maxCount),{add:function(){return l>0&&v.length>=l?(s(new Error("maxCount exceeded: "+v.length)),r):(v.push(arguments),v)},addPriority:function(){return l>0&&v.length>=l?(s(new Error("maxCount exceeded: "+v.length)),r):(v.unshift(arguments),v)},start:function(){return f||(f=e,this.run()),f},run:function(){for(;f;)v.length>0?c.onQueueItem.apply(c,v.shift()):this.stop();return v},stop:function(){return f=t},isRunning:function(){return f},count:function(){return v.length},clear:function(){return this.stop(),v=[]}}):r},n.version="1.1.0"}(Pattern);