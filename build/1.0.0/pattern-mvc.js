/**
 * Copyright (c) 2011-2014 Activity, LLC.
 * Version: 1.0.0
 * Built: Fri Aug 08 2014 00:38:02 GMT-0400 (EDT)
 * Released under the MIT license:
 * https://github.com/rgr-myrg/pattern-js/raw/master/MIT-LICENSE
 */
(function(w){w.Pattern=w.Pattern||{};})(window);(function(b){b.Queue=function(a){var e=null,f=null,d=!1,c=function(){},b=function(){},i=300,h=-1,g=[];if(typeof a!=="object"||!a.id)throw Error("Queue options Object is Null");e=a.id;if(!isNaN(a.timeToWait)&&a.timeToWait>0)i=a.timeToWait;if(!isNaN(a.maxCount)&&a.maxCount>0)h=a.maxCount;if(typeof a.callback==="function")c=a.callback;if(typeof a.onError==="function")b=a.onError;return{add:function(){if(h>0&&g.length>=h)return b(Error("Max count exceeded: "+g.length)),!1;g.push(arguments);return!0},
start:function(){if(!d)try{f=setInterval(e+".run()",i)}catch(c){b(c)}},run:function(){if(g.length>0){d=!0;try{c.apply(this,g.shift())}catch(a){this.stop(),b(a)}}else this.stop()},stop:function(){d=!1;clearInterval(f)},isRunning:function(){return d},count:function(){return g.length},clear:function(){this.stop();g=[]}}}})(Pattern);
(function(b){b.ObjectFactory=function(a){if(typeof a!=="object")throw"Object not provided";var e=function(d){if(typeof d==="function")try{return new d}catch(c){}else if(typeof d==="object")return d},b=e(a._implements_),d=e(a._extends_),a=e(a._public_),c;for(c in d)d.hasOwnProperty(c)&&!a[c]&&(a[c]=d[c]);for(c in b)if(b.hasOwnProperty(c)&&!a[c])throw object.instance+" must implement '"+c+"' "+typeof b[c];if(typeof a.init==="function")try{a.init()}catch(k){}return a}})(Pattern);
(function(b){b.Observable=function(a){return b.ObjectFactory({_extends_:function(){var a=[];return{addObserver:function(b){if((typeof b==="function"||typeof b==="object")&&typeof b.update==="function")if(a.push(b),typeof b.onRegister==="function")try{b.onRegister()}catch(d){}},notifyObservers:function(){for(var b=a.length,d=0;d<b;d++){var c=a[d];c.update.apply(c,arguments)}},removeObserver:function(b){for(var d=0,c=a.length;d<c;d++)if(a[d]===b){a.splice(d,1);break}}}},_public_:a})}})(Pattern);
(function(b){b.Observer=function(a){return b.ObjectFactory({_extends_:function(){return{update:function(a){if(typeof this[a.name]==="function")try{this[a.name](a.data)}catch(b){}}}},_public_:a})}})(Pattern);
(function(b){b.MVCObservable=function(a){return b.ObjectFactory({_extends_:function(){return{observers:[],addObserver:function(a){if((typeof a==="function"||typeof a==="object")&&typeof a.notify==="function")if(this.observers.push(a),typeof a.onRegister==="function")a.onRegister()},notifyObservers:function(a){for(var b=this.observers.length,d=0;d<b;d++)this.observers[d].notify(a,this)}}},_public_:a})};b.MVCObserver=function(a){return b.ObjectFactory({_extends_:function(){return{onRegister:function(){},
notify:function(a,b){this.observable=b;if(typeof this[a]==="function")try{this[a]()}catch(d){}}}},_public_:a})};b.IProxy={NAME:""};b.IMediator={NAME:"",listNotificationInterests:function(){},handleNotification:function(){}};b.ICommand={execute:function(){}};b.Proxy=function(){var a={};return{facade:null,setData:function(b){a=b},getData:function(){return a},onRegister:function(){},onRemove:function(){}}};b.Mediator=b.MVCObserver(function(){return{facade:null,onRegister:function(){},onRemove:function(){}}});
b.Facade=function(){var a=function(){var a={};return{facade:{},registerProxy:function(c){c.facade=this.facade;a[c.NAME]||(a[c.NAME]=c);if(typeof c.onRegister==="function")c.onRegister()},retrieveProxy:function(c){return a[c]?a[c]:null},removeProxy:function(c){if(typeof a[c].onRemove==="function")a[c].onRemove();a[c]=null}}}(),e=b.MVCObservable(function(){var a={};return{facade:{},notification:{},registerMediator:function(c){c.facade=this.facade;a[c.NAME]||(a[c.NAME]=c,this.addObserver(c))},retrieveMediator:function(c){return a[c]?
a[c]:null},removeMediator:function(c){if(typeof a[c].onRemove==="function")a[c].onRemove();a[c]=null},notifyObservers:function(a){for(var b=this.observers.length,d=0;d<b;d++){for(var e=this.observers[d].listNotificationInterests(),g=!1,f=0,j=e.length;f<j;f++)if(e[f]==this.notification.name){g=!0;break}if(g)this.observers[d].notification=this.notification,this.observers[d].notify(a,this)}},sendNotification:function(a){this.notification=a;this.notifyObservers("handleNotification")}}}),f=new b.MVCObserver(function(){var a=
{},c=[];return{facade:{},NAME:"Controller",registerCommand:function(b,e){e.facade=this.facade;a[b]||(a[b]=e,c.push(b))},listNotificationInterests:function(){return c},handleNotification:function(){var b=this.notification;typeof a[b.name]==="object"&&typeof a[b.name].execute==="function"&&a[b.name].execute(b)}}});return{CMD_STARTUP:"CMD_STARTUP",registerProxy:function(b){a.registerProxy(b)},registerMediator:function(a){e.registerMediator(a)},registerCommand:function(a,b){f.registerCommand(a,b)},retrieveProxy:function(b){return a.retrieveProxy(b)},
retrieveMediator:function(a){return e.retrieveMediator(a)},removeProxy:function(b){a.removeProxy(b)},removeMediator:function(a){e.removeMediator(a)},sendNotification:function(a,b,f){e.sendNotification({name:a,body:b,type:f})},initializeFacade:function(){a.facade=this;e.facade=this;f.facade=this;this.registerMediator(f)}}}})(Pattern);
