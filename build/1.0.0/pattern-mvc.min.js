/**
 * Copyright (c) 2011-2014 Activity, LLC.
 * Version: 1.0.0
 * Built: Fri Aug 08 2014 00:38:02 GMT-0400 (EDT)
 * Released under the MIT license:
 * https://github.com/rgr-myrg/pattern-js/raw/master/MIT-LICENSE
 */
(function(w){w.Pattern=w.Pattern||{};})(window);!function(t){t.Queue=function(t){var n=null,e=null,o=!1,i=function(){},r=function(){},c=300,f=-1,a=[];if("object"!=typeof t||!t.id)throw new Error("Queue options Object is Null");return n=t.id,!isNaN(t.timeToWait)&&t.timeToWait>0&&(c=t.timeToWait),!isNaN(t.maxCount)&&t.maxCount>0&&(f=t.maxCount),"function"==typeof t.callback&&(i=t.callback),"function"==typeof t.onError&&(r=t.onError),{add:function(){return f>0&&a.length>=f?(r(new Error("Max count exceeded: "+a.length)),!1):(a.push(arguments),!0)},start:function(){if(!o)try{e=setInterval(n+".run()",c)}catch(t){r(t)}},run:function(){if(a.length>0){o=!0;try{i.apply(this,a.shift())}catch(t){this.stop(),r(t)}}else this.stop()},stop:function(){o=!1,clearInterval(e)},isRunning:function(){return o},count:function(){return a.length},clear:function(){this.stop(),a=[]}}}}(Pattern),function(t){t.ObjectFactory=function(t){if("object"!=typeof t)throw"Object not provided";var n=function(t){if("function"==typeof t)try{return new t}catch(n){}else if("object"==typeof t)return t},e=n(t._implements_),o=n(t._extends_),i=n(t._public_);for(var r in o)o.hasOwnProperty(r)&&!i[r]&&(i[r]=o[r]);for(r in e)if(e.hasOwnProperty(r)&&!i[r])throw object.instance+" must implement '"+r+"' "+typeof e[r];if("function"==typeof i.init)try{i.init()}catch(c){}return i}}(Pattern),function(t){t.Observable=function(n){var e=function(){var t=[];return{addObserver:function(n){if(("function"==typeof n||"object"==typeof n)&&"function"==typeof n.update&&(t.push(n),"function"==typeof n.onRegister))try{n.onRegister()}catch(e){}},notifyObservers:function(){for(var n=t.length,e=0;n>e;e++){var o=t[e];o.update.apply(o,arguments)}},removeObserver:function(n){for(var e=0,o=t.length;o>e;e++)if(t[e]===n){t.splice(e,1);break}}}};return t.ObjectFactory({_extends_:e,_public_:n})}}(Pattern),function(t){t.Observer=function(n){var e=function(){return{update:function(){var t=arguments[0];if("function"==typeof this[t.name])try{this[t.name](t.data)}catch(n){}}}};return t.ObjectFactory({_extends_:e,_public_:n})}}(Pattern),function(t){t.MVCObservable=function(n){var e=function(){return{observers:[],addObserver:function(t){"function"!=typeof t&&"object"!=typeof t||"function"!=typeof t.notify||(this.observers.push(t),"function"==typeof t.onRegister&&t.onRegister())},notifyObservers:function(t){for(var n=this.observers.length,e=0;n>e;e++)this.observers[e].notify(t,this)}}};return t.ObjectFactory({_extends_:e,_public_:n})},t.MVCObserver=function(n){var e=function(){return{onRegister:function(){},notify:function(t,n){if(this.observable=n,"function"==typeof this[t])try{this[t]()}catch(e){}}}};return t.ObjectFactory({_extends_:e,_public_:n})},t.IProxy={NAME:""},t.IMediator={NAME:"",listNotificationInterests:function(){},handleNotification:function(){}},t.ICommand={execute:function(){}},t.Proxy=function(){var t={};return{facade:null,setData:function(n){t=n},getData:function(){return t},onRegister:function(){},onRemove:function(){}}},t.Mediator=t.MVCObserver(function(){return{facade:null,onRegister:function(){},onRemove:function(){}}}),t.Facade=function(){var n=function(){var t={};return{facade:{},registerProxy:function(n){n.facade=this.facade,t[n.NAME]||(t[n.NAME]=n),"function"==typeof n.onRegister&&n.onRegister()},retrieveProxy:function(n){return t[n]?t[n]:null},removeProxy:function(n){"function"==typeof t[n].onRemove&&t[n].onRemove(),t[n]=null}}}(),e=t.MVCObservable(function(){var t={};return{facade:{},notification:{},registerMediator:function(n){n.facade=this.facade,t[n.NAME]||(t[n.NAME]=n,this.addObserver(n))},retrieveMediator:function(n){return t[n]?t[n]:null},removeMediator:function(n){"function"==typeof t[n].onRemove&&t[n].onRemove(),t[n]=null},notifyObservers:function(t){for(var n=this.observers.length,e=0;n>e;e++){for(var o=this.observers[e].listNotificationInterests(),i=!1,r=0,c=o.length;c>r;r++)if(o[r]==this.notification.name){i=!0;break}i&&(this.observers[e].notification=this.notification,this.observers[e].notify(t,this))}},sendNotification:function(t){this.notification=t,this.notifyObservers("handleNotification")}}}),o=new t.MVCObserver(function(){var t={},n=[];return{facade:{},NAME:"Controller",registerCommand:function(e,o){o.facade=this.facade,t[e]||(t[e]=o,n.push(e))},listNotificationInterests:function(){return n},handleNotification:function(){var n=this.notification;"object"==typeof t[n.name]&&"function"==typeof t[n.name].execute&&t[n.name].execute(n)}}}),i=function(t){n.facade=t},r=function(t){e.facade=t},c=function(t){o.facade=t,t.registerMediator(o)};return{CMD_STARTUP:"CMD_STARTUP",registerProxy:function(t){n.registerProxy(t)},registerMediator:function(t){e.registerMediator(t)},registerCommand:function(t,n){o.registerCommand(t,n)},retrieveProxy:function(t){return n.retrieveProxy(t)},retrieveMediator:function(t){return e.retrieveMediator(t)},removeProxy:function(t){n.removeProxy(t)},removeMediator:function(t){e.removeMediator(t)},sendNotification:function(t,n,o){e.sendNotification({name:t,body:n,type:o})},initializeFacade:function(){i(this),r(this),c(this)}}}}(Pattern);