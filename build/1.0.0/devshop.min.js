/**
 * Copyright (c) 2011-2014 DevShop http://devshop.me/
 * Version: 1.0.0
 * Built: Sun Aug 03 2014 15:15:36 GMT-0400 (EDT)
 * Released under the MIT license:
 * https://github.com/rgr-myrg/DevShop-JS/raw/master/MIT-LICENSE
 */
(function(w){w.DevShop=w.devshop=w.DevShop||{};})(window);!function(t){t.SingletonFactory=function(t){var n=function(t){if("function"==typeof t)try{return new t}catch(n){}else if("object"==typeof t)return t},e=n(t.__implement),i=n(t.__extend),o=n(t.__construct);for(var r in i)i.hasOwnProperty(r)&&(o[r]||(o[r]=i[r]));for(r in e)if(e.hasOwnProperty(r)&&!o[r])throw t.instance+" must implement '"+r+"' "+typeof e[r];if("function"==typeof o.initialize)try{o.initialize()}catch(f){}return o}}(DevShop),function(t){t.Observable=function(n){var e=function(){return{observers:[],addObserver:function(t){"function"!=typeof t&&"object"!=typeof t||"function"!=typeof t.notify||(this.observers.push(t),"function"==typeof t.onRegister&&t.onRegister())},notifyObservers:function(t){for(var n=this.observers.length,e=0;n>e;e++)this.observers[e].notify(t,this)}}};return t.SingletonFactory({__extend:e,__construct:n})}}(DevShop),function(t){t.Observer=function(n){var e=function(){return{onRegister:function(){},notify:function(t,n){if(this.observable=n,"function"==typeof this[t])try{this[t]()}catch(e){}}}};return t.SingletonFactory({__extend:e,__construct:n})}}(DevShop),function(t){t.EventSignal=function(){var t=[];return{addListener:function(n){"function"==typeof n&&t.push(n)},removeListener:function(n){for(var e=t.length,i=0;e>i;i++)t[i]===n&&(t[i]=null)},dispatch:function(){for(var n=[],e=t.length,i=0;e>i;i++){var o=t[i];"function"==typeof o?t[i].apply(this,arguments):n.push(i)}for(e=n.length,i=0;e>i;i++)t.splice(i,1)}}}}(DevShop),function(t){t.IProxy={NAME:""},t.IMediator={NAME:"",listNotificationInterests:function(){},handleNotification:function(){}},t.ICommand={execute:function(){}},t.Proxy=function(){var t={};return{facade:null,setData:function(n){t=n},getData:function(){return t},onRegister:function(){},onRemove:function(){}}},t.Mediator=t.Observer(function(){return{facade:null,onRegister:function(){},onRemove:function(){}}}),t.Facade=function(){var n=function(){var t={};return{facade:{},registerProxy:function(n){n.facade=this.facade,t[n.NAME]||(t[n.NAME]=n),"function"==typeof n.onRegister&&n.onRegister()},retrieveProxy:function(n){return t[n]?t[n]:null},removeProxy:function(n){"function"==typeof t[n].onRemove&&t[n].onRemove(),t[n]=null}}}(),e=new t.Observable(function(){var t={};return{facade:{},notification:{},registerMediator:function(n){n.facade=this.facade,t[n.NAME]||(t[n.NAME]=n,this.addObserver(n))},retrieveMediator:function(n){return t[n]?t[n]:null},removeMediator:function(n){"function"==typeof t[n].onRemove&&t[n].onRemove(),t[n]=null},notifyObservers:function(t){for(var n=this.observers.length,e=0;n>e;e++){for(var i=this.observers[e].listNotificationInterests(),o=!1,r=0,f=i.length;f>r;r++)if(i[r]==this.notification.name){o=!0;break}o&&(this.observers[e].notification=this.notification,this.observers[e].notify(t,this))}},sendNotification:function(t){this.notification=t,this.notifyObservers("handleNotification")}}}),i=new t.Observer(function(){var t={},n=[];return{facade:{},NAME:"BTG.Controller",registerCommand:function(e,i){i.facade=this.facade,t[e]||(t[e]=i,n.push(e))},listNotificationInterests:function(){return n},handleNotification:function(){var n=this.notification;"object"==typeof t[n.name]&&"function"==typeof t[n.name].execute&&t[n.name].execute(n)}}}),o=function(t){n.facade=t},r=function(t){e.facade=t},f=function(t){i.facade=t,t.registerMediator(i)};return{CMD_STARTUP:"CMD_STARTUP",registerProxy:function(t){n.registerProxy(t)},registerMediator:function(t){e.registerMediator(t)},registerCommand:function(t,n){i.registerCommand(t,n)},retrieveProxy:function(t){return n.retrieveProxy(t)},retrieveMediator:function(t){return e.retrieveMediator(t)},removeProxy:function(t){n.removeProxy(t)},removeMediator:function(t){e.removeMediator(t)},sendNotification:function(t,n,i){e.sendNotification({name:t,body:n,type:i})},initializeFacade:function(){o(this),r(this),f(this)}}}}(DevShop),function(t){t.Publisher=function(){var t={};return{registerEvents:function(n){"object"==typeof n&&(t=n)},registerSubscriber:function(n){if("function"==typeof n.onRegister){var e=n.onRegister();for(var i in e)e.hasOwnProperty(i)&&"object"==typeof t[i]&&t[i].addListener(e[i]);n.onRegister=function(){}}},notify:function(t,n){"function"==typeof t.dispatch&&t.dispatch(n)}}}}(DevShop);