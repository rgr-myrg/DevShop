!function(n){n.Pattern=n.Pattern||{}}(window),Pattern.version="1.1.1",function(n){n.EventSignal=function(){var n=[];return{addListener:function(r){return t(r)&&n.push(r),n},removeListener:function(t){return n=u(n,t)},dispatch:function(){for(var t=n.length,r=0;r<t;r++){n[r].apply(this,arguments)}}}},n.Notifier=function(n){var r=[],i=e(n);return i.addReceiver=function(n){return t(n.notify)&&r.push(n),r},i.removeReceiver=function(n){return r=u(r,n)},i.notify=function(n,t){for(var e=0,o=r.length;e<o;e++)r[e].notify(n,t);return n},o(i),i},n.Observable=function(n){var i=[],c=e(n);return c.addObserver=function(n){return r(n)&&t(n.onUpdate)?(n._observable=c,i.push(n),t(n.onRegister)&&n.onRegister(),i):n},c.removeObserver=function(n){return i=u(i,n)},c.notifyObservers=function(n,t){for(var r=0,e=i.length;r<e;r++)i[r].onUpdate(n,t)},o(c),c},n.Observer=function(n){var r=e(n);return r.onUpdate=function(n,e){return t(r[n])&&i(r[n],r,e),n},o(r),r},n.Publisher=function(n){var c=[],f=e(n);return f.registerSubscriber=function(n){return r(n)&&c.push(n),c},f.removeSubscriber=function(n){return c=u(c,n)},f.notify=function(n,r){for(var e=0,o=c.length;e<o;e++){var u=c[e];t(u[n])&&i(u[n],u,r)}return n},o(f),f},n.Queue=function(n){var e=null,o=null,i=!1,u=function(){},c=function(){},f=300,a=-1,s=[];if(!r(n)||!n.id)throw new Error("Queue options Object is Null");return e=n.id,!isNaN(n.timeToWait)&&n.timeToWait>0&&(f=n.timeToWait),!isNaN(n.maxCount)&&n.maxCount>0&&(a=n.maxCount),t(n.callback)&&(u=n.callback),t(n.onError)&&(c=n.onError),{add:function(){return a>0&&s.length>=a?(c(new Error("Max count exceeded: "+s.length)),!1):(s.push(arguments),!0)},start:function(){if(!i)try{o=setInterval(e+".run()",f)}catch(n){c(n)}},run:function(){if(s.length>0){i=!0;try{u.apply(this,s.shift())}catch(n){this.stop(),c(n)}}else this.stop()},stop:function(){i=!1,clearInterval(o)},isRunning:function(){return i},count:function(){return s.length},clear:function(){this.stop(),s=[]}}},n.Receiver=function(n){var r={},u={},c=function(n,r,e){return!n[r]&&t(e)&&(n[r]=e),n},f=e(n);return f.on=function(n,t){return r=c(r,n,t)},f.once=function(n,t){return u=c(u,n,t)},f.notify=function(n,e){return t(u[n])&&(i(u[n],f,e),delete u[n]),t(r[n])&&i(r[n],f,e),n},o(f),f};var t=function(n){return"function"==typeof n},r=function(n){return"object"==typeof n},e=function(n){return r(n)?n:{}},o=function(n){t(n.init)&&n.init()},i=function(n,t,r){!function(){n.apply(t,arguments)}(r)},u=function(n,r){for(var e=0,o=n.length;e<o;e++)if(n[e]===r){n.splice(e,1),t(r.onRemove)&&r.onRemove();break}return n}}(Pattern);