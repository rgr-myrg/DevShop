!function(n){n.Pattern=n.Pattern||{}}(window),Pattern.version="1.1.1",function(n){n.EventSignal=function(){var n=[];return{addListener:function(r){return t(r)&&n.push(r),n},addListeners:function(n){for(var t=0,r=n.length;t<r;t++)this.addListener(n[t]);return this},removeListener:function(t){return n=u(n,t)},dispatch:function(){for(var t=n.length,r=0;r<t;r++){n[r].apply(this,arguments)}}}},n.Notifier=function(n){var r=[],o=e(n);return o.addReceiver=function(n){return t(n.notify)&&r.push(n),r},o.removeReceiver=function(n){return r=u(r,n)},o.notify=function(n,t){for(var e=0,i=r.length;e<i;e++)r[e].notify(n,t);return n},i(o),o},n.Observable=function(n){var o=[],c=e(n);return c.addObserver=function(n){return r(n)&&t(n.onUpdate)?(n._observable=c,o.push(n),t(n.onRegister)&&n.onRegister(),o):n},c.removeObserver=function(n){return o=u(o,n)},c.notifyObservers=function(n,t){for(var r=0,e=o.length;r<e;r++)o[r].onUpdate(n,t)},i(c),c},n.Observer=function(n){var r=e(n);return r.onUpdate=function(n,e){return t(r[n])&&o(r[n],r,e),n},i(r),r},n.Publisher=function(){var n=[];return this.registerSubscribers=function(t){for(var e=0,i=t.length;e<i;e++)r(t[e])&&n.push(t[e]);return this},this.notifyWith=function(n){if(r(n))for(var t in n)n.hasOwnProperty(t)&&(this[t]=n[t]);return this},this.removeSubscriber=function(t){return n=u(n,t)},this.notify=function(r,e){for(var i=0,u=n.length;i<u;i++){var c=n[i];t(c[r])&&o(c[r],c,e)}return r},this.getSubscribers=function(){return n},this},n.Queue=function(n){var e=null,i=null,o=!1,u=function(){},c=function(){},f=300,a=-1,s=[];if(!r(n)||!n.id)throw new Error("Queue options Object is Null");return e=n.id,!isNaN(n.timeToWait)&&n.timeToWait>0&&(f=n.timeToWait),!isNaN(n.maxCount)&&n.maxCount>0&&(a=n.maxCount),t(n.callback)&&(u=n.callback),t(n.onError)&&(c=n.onError),{add:function(){return a>0&&s.length>=a?(c(new Error("Max count exceeded: "+s.length)),!1):(s.push(arguments),!0)},start:function(){if(!o)try{i=setInterval(e+".run()",f)}catch(n){c(n)}},run:function(){if(s.length>0){o=!0;try{u.apply(this,s.shift())}catch(n){this.stop(),c(n)}}else this.stop()},stop:function(){o=!1,clearInterval(i)},isRunning:function(){return o},count:function(){return s.length},clear:function(){this.stop(),s=[]}}},n.Receiver=function(n){var r={},u={},c=function(n,r,e){return!n[r]&&t(e)&&(n[r]=e),n},f=e(n);return f.on=function(n,t){return r=c(r,n,t)},f.once=function(n,t){return u=c(u,n,t)},f.notify=function(n,e){return t(u[n])&&(o(u[n],f,e),delete u[n]),t(r[n])&&o(r[n],f,e),n},i(f),f};var t=function(n){return"function"==typeof n},r=function(n){return"object"==typeof n},e=function(n){return r(n)?n:{}},i=function(n){t(n.init)&&n.init()},o=function(n,t,r){!function(){n.apply(t,arguments)}(r)},u=function(n,r){for(var e=0,i=n.length;e<i;e++)if(n[e]===r){n.splice(e,1),t(r.onRemove)&&r.onRemove();break}return n}}(Pattern);