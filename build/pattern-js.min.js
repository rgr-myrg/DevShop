!function(n){n.Pattern=n.Pattern||{}}(window),Pattern.version="1.1.1",function(n){n.EventSignal=function(){var n=[];return{addListener:function(r){return t(r)&&n.push(r),n},addListeners:function(n){for(var t=0,r=n.length;t<r;t++)this.addListener(n[t]);return this},removeListener:function(t){return n=u(n,t)},dispatch:function(){for(var t=n.length,r=0;r<t;r++){n[r].apply(this,arguments)}}}},n.Notifier=function(){var n=[];return{addReceiver:function(r){return t(r.notify)&&n.push(r),n},addReceivers:function(n){for(var t=0,r=n.length;t<r;t++)this.addReceiver(n[t]);return this},removeReceiver:function(t){return n=u(n,t)},notify:function(t,r){for(var e=0,i=n.length;e<i;e++)n[e].notify(t,r);return t},notifyWith:function(n){if(r(n))for(var t in n)n.hasOwnProperty(t)&&(this[t]=n[t]);return this}}},n.Observable=function(){var n=[];return{addObserver:function(e){return r(e)&&t(e.onUpdate)?(e._observable=this,n.push(e),t(e.onRegister)&&e.onRegister(),n):e},addObservers:function(n){for(var t=0,r=n.length;t<r;t++)this.addObserver(n[t]);return this},removeObserver:function(t){return n=u(n,t)},notifyWith:function(n){if(r(n))for(var t in n)n.hasOwnProperty(t)&&(this[t]=n[t]);return this},notifyObservers:function(t,r){for(var e=0,i=n.length;e<i;e++)n[e].onUpdate(t,r)}}},n.Observer=function(n){var r=e(n);return r.onUpdate=function(n,e){return t(r[n])&&o(r[n],r,e),n},i(r),r},n.Publisher=function(){var n=[];return{registerSubscribers:function(t){for(var e=0,i=t.length;e<i;e++)r(t[e])&&n.push(t[e]);return this},notifyWith:function(n){if(r(n))for(var t in n)n.hasOwnProperty(t)&&(this[t]=n[t]);return this},removeSubscriber:function(t){return n=u(n,t)},notify:function(r,e){for(var i=0,u=n.length;i<u;i++){var f=n[i];t(f[r])&&o(f[r],f,e)}return r},getSubscribers:function(){return n}}},n.Queue=function(n){var e=null,i=null,o=!1,u=function(){},f=function(){},c=300,s=-1,a=[];if(!r(n)||!n.id)throw new Error("Queue options Object is Null");return e=n.id,!isNaN(n.timeToWait)&&n.timeToWait>0&&(c=n.timeToWait),!isNaN(n.maxCount)&&n.maxCount>0&&(s=n.maxCount),t(n.callback)&&(u=n.callback),t(n.onError)&&(f=n.onError),{add:function(){return s>0&&a.length>=s?(f(new Error("Max count exceeded: "+a.length)),!1):(a.push(arguments),!0)},start:function(){if(!o)try{i=setInterval(e+".run()",c)}catch(n){f(n)}},run:function(){if(a.length>0){o=!0;try{u.apply(this,a.shift())}catch(n){this.stop(),f(n)}}else this.stop()},stop:function(){o=!1,clearInterval(i)},isRunning:function(){return o},count:function(){return a.length},clear:function(){this.stop(),a=[]}}},n.Receiver=function(){var n={},r={},e=function(n,r,e){return!n[r]&&t(e)&&(n[r]=e),n};return{on:function(t,r){return n=e(n,t,r),this},once:function(n,t){return r=e(r,n,t),this},notify:function(e,i){return t(r[e])&&(o(r[e],this,i),delete r[e]),t(n[e])&&o(n[e],this,i),e}}};var t=function(n){return"function"==typeof n},r=function(n){return"object"==typeof n},e=function(n){return r(n)?n:{}},i=function(n){t(n.init)&&n.init()},o=function(n,t,r){!function(){n.apply(t,arguments)}(r)},u=function(n,r){for(var e=0,i=n.length;e<i;e++)if(n[e]===r){n.splice(e,1),t(r.onRemove)&&r.onRemove();break}return n}}(Pattern);