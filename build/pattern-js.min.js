!function(n){n.Pattern=n.Pattern||{}}(window),Pattern.version="1.1.1",function(n){n.EventSignal=function(){var n=[];return{addListener:function(r){return t(r)&&n.push(r),n},addListeners:function(n){for(var t=0,r=n.length;t<r;t++)this.addListener(n[t]);return this},removeListener:function(t){return n=u(n,t)},dispatch:function(){for(var t=n.length,r=0;r<t;r++){n[r].apply(this,arguments)}}}},n.Notifier=function(){var n=[];return{addReceiver:function(r){return t(r.notify)&&n.push(r),n},addReceivers:function(n){for(var t=0,r=n.length;t<r;t++)this.addReceiver(n[t]);return this},removeReceiver:function(t){return n=u(n,t)},notify:function(t,r){for(var e=0,i=n.length;e<i;e++)n[e].notify(t,r);return t},notifyWith:function(n){if(r(n))for(var t in n)n.hasOwnProperty(t)&&(this[t]=n[t]);return this}}},n.Observable=function(n){var o=[],f=e(n);return f.addObserver=function(n){return r(n)&&t(n.onUpdate)?(n._observable=f,o.push(n),t(n.onRegister)&&n.onRegister(),o):n},f.removeObserver=function(n){return o=u(o,n)},f.notifyObservers=function(n,t){for(var r=0,e=o.length;r<e;r++)o[r].onUpdate(n,t)},i(f),f},n.Observer=function(n){var r=e(n);return r.onUpdate=function(n,e){return t(r[n])&&o(r[n],r,e),n},i(r),r},n.Publisher=function(){var n=[];return this.registerSubscribers=function(t){for(var e=0,i=t.length;e<i;e++)r(t[e])&&n.push(t[e]);return this},this.notifyWith=function(n){if(r(n))for(var t in n)n.hasOwnProperty(t)&&(this[t]=n[t]);return this},this.removeSubscriber=function(t){return n=u(n,t)},this.notify=function(r,e){for(var i=0,u=n.length;i<u;i++){var f=n[i];t(f[r])&&o(f[r],f,e)}return r},this.getSubscribers=function(){return n},this},n.Queue=function(n){var e=null,i=null,o=!1,u=function(){},f=function(){},c=300,s=-1,a=[];if(!r(n)||!n.id)throw new Error("Queue options Object is Null");return e=n.id,!isNaN(n.timeToWait)&&n.timeToWait>0&&(c=n.timeToWait),!isNaN(n.maxCount)&&n.maxCount>0&&(s=n.maxCount),t(n.callback)&&(u=n.callback),t(n.onError)&&(f=n.onError),{add:function(){return s>0&&a.length>=s?(f(new Error("Max count exceeded: "+a.length)),!1):(a.push(arguments),!0)},start:function(){if(!o)try{i=setInterval(e+".run()",c)}catch(n){f(n)}},run:function(){if(a.length>0){o=!0;try{u.apply(this,a.shift())}catch(n){this.stop(),f(n)}}else this.stop()},stop:function(){o=!1,clearInterval(i)},isRunning:function(){return o},count:function(){return a.length},clear:function(){this.stop(),a=[]}}},n.Receiver=function(n){var r={},u={},f=function(n,r,e){return!n[r]&&t(e)&&(n[r]=e),n},c=e(n);return c.on=function(n,t){return r=f(r,n,t)},c.once=function(n,t){return u=f(u,n,t)},c.notify=function(n,e){return t(u[n])&&(o(u[n],c,e),delete u[n]),t(r[n])&&o(r[n],c,e),n},i(c),c};var t=function(n){return"function"==typeof n},r=function(n){return"object"==typeof n},e=function(n){return r(n)?n:{}},i=function(n){t(n.init)&&n.init()},o=function(n,t,r){!function(){n.apply(t,arguments)}(r)},u=function(n,r){for(var e=0,i=n.length;e<i;e++)if(n[e]===r){n.splice(e,1),t(r.onRemove)&&r.onRemove();break}return n}}(Pattern);